# Competitive Response Analysis

This project analyzes competitive response strategies across different industries using the `eda.ipynb` notebook. It explores how companies respond to competitor actions (e.g., price cuts, promotions) and builds a machine learning model to predict the type of response.

## Files

- **`eda.ipynb`**: The primary Jupyter Notebook containing the complete analysis pipeline (Data Cleaning, EDA, and Machine Learning).
- **`eda copy.ipynb`**: A variant of the notebook that performs similar analysis but on a different dataset (`data/Data2.csv`) and includes an additional column `no_response_outcome`.
- **`run_analysis.py`**: A Python script that reproduces the logic of `eda.ipynb` for automated execution.
- **`data/dataset.csv`**: The input dataset for `eda.ipynb`.
- **`data/cleaned_dataset.csv`**: The processed dataset generated by the analysis.
- **`output/`**: Directory containing generated plots and visualizations.

## Code Explanation (`eda.ipynb`)

The analysis is structured into four main sections:

### 1. Data Loading
- Loads the raw data from `data/dataset.csv`.
- Checks for file existence and encoding.

### 2. Data Cleaning
The notebook performs extensive preprocessing to prepare the data for analysis:
- **Missing Values**: Standardizes missing value indicators (e.g., "NA", "null") to `NaN`.
- **Date Conversion**: Converts `event_date` to datetime objects.
- **Feature Engineering**:
    - **`crisis_event`**: Created by parsing the `notes` column for keywords like "covid", "inflation", or "lockdown".
    - **`response_observed_bin`**: Binary mapping (1/0) of the `response_observed` column.
    - **`price_before_type` / `price_after_type`**: Classifies prices as "numeric" or text descriptions, handling encoding issues (e.g., 'Â¥').
    - **`quantity_after_code`**: Maps quantity descriptions (e.g., "bundle", "premium") to an ordinal numeric scale (1-4).

### 3. Exploratory Data Analysis (EDA)
- **Descriptive Statistics**: Analyzes `response_lag_days` to understand reaction times.
- **Visualizations**:
    - **`response_type_distribution.png`**: A count plot showing the frequency of different response types.
    - **`industry_response_heatmap.png`**: A heatmap displaying the relationship between industries and their typical response types.

### 4. Machine Learning Pipeline
A Random Forest Classifier is trained to predict the `response_type` based on event characteristics.

- **Filtering**: Only response types with at least 2 occurrences are included to ensure sufficient training data.
- **Features (`X`)**:
    - Categorical: `industry`, `action_type`, `price_before_type`, `price_after_type`, `market_structure`.
    - Numeric: `quantity_after_code`, `regulatory_sensitivity_bin`, `crisis_event`.
- **Preprocessing**: Uses `ColumnTransformer` with `OneHotEncoder` for categorical features and passthrough for numeric ones.
- **Model**: `RandomForestClassifier` (300 estimators, balanced class weights).
- **Evaluation**: Outputs model accuracy and a feature importance plot (`feature_importance.png`).




